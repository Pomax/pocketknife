(function(a){if(!a["Toolkit"])return;var b=function(b){var c=create("div");var d=false;if(b.id)c.id=b.id;if(b.get("class"))c.set("class",b.get("class"));if(b.get("style"))c.set("style",b.get("style"));var e={type:"range",min:b.get("min")||"0",max:b.get("max")||"100",step:b.get("step")||"1",value:b.get("value")||"0"};c.set(e);c.classes().add("tiny-toolkit-input-type-range");var f=create("span").classes().add("tiny-toolkit-input-type-range-slider");var g=false;var h=function(a,b,c){if(d)return;var e=c.clientX,f=a.position().left,g=a.position().right-b.position().width;if(f<=e&&e<=g){e-=f;var h=parseFloat(a.get("min")),i=parseFloat(a.get("max")),j=e/(g-f),k=""+(h+j*(i-h));b.css("left",parseInt(1e3*(k-h)/(i-h))/10+"%");a.set("value",k);if(a.onchange){a.onchange({value:k})}}};if(b.onchange){c.onchange=b.onchange}c.add(f);f.onselectstart=function(){return false};f.onmousedown=function(){return false};c.onselectstart=function(){return false};c.onmousedown=function(){return false};c.listen("mousemove",function(a){if(g){h(c,f,a)}});c.listen("mousedown",function(a){g=true;h(c,f,a);return false});a.document.listen("mouseup",function(a){g=false});if(e.value!=="0"){var i=parseFloat(e.min),j=parseFloat(e.max),k=parseFloat(e.value);f.css("left",100*(k-i)/(j-i)+"%")}c.disable=function(){d=true;c.classes().add("hidden");f.classes().add("hidden")};c.enable=function(){d=false;c.classes().remove("hidden");f.classes().remove("hidden")};return c};var c=function(a){var c=a["set"];a["set"]=function(d,e){if(d!=="type"||e!=="range"){return c(d,e)}var f=a.parent();if(f){f.replace(a,b(a))}}};var d=function(a){if(a.nodeName.toLowerCase==="input"){c(a);if(a.get("type")==="range"){return a.set("type","range")}}else{e(a)}return a};var e=function(c){var d=c||a;d.find("input[type=range]").foreach(function(a){if(a.parent()){a.parent().replace(a,b(a))}})};a["Toolkit"].addUpdate(function(a){return d(a)});document.listenOnce("DOMContentLoaded",e)}(window));
