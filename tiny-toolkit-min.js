(function(e,j){NodeList.prototype.forEach=HTMLCollection.prototype.forEach=Array.prototype.forEach;e.Toolkit={version:"2013.05.05"};e.exists=function(a){return void 0!==a&&null!==a};var k=function(a,c,b,d){var g=new XMLHttpRequest,e=exists(d);g.open(a,c,e);e&&(g.onload=function(){d(g)});if(b){a=new FormData;for(var f in Object.keys(b))a.append(f,b[f]);b=a}g.withCredentials=!0;g.send(b);if(!e)return g.responseText};e.get=function(a,c){return k("GET",a,null,c)};e.post=function(a,c,b){return k("POST",
a,c,b)};e.create=function(a,c,b){a=j.createElement(a);var d;if("object"==typeof c)for(d in c)Object.hasOwnProperty(c,d)||a.setAttribute(d,c[d]);"string"===typeof c&&(b=c);b&&(a.innerHTML=b);return a};var l=function(a,c){var b=a.querySelectorAll(c),d=[];if(0===b.length)return[];if(1===b.length)return b[0];for(var g=0,e=b.length;g<e;g++)d[g]=b[g];return d};e.find=function(a){return l(j,a)};e.head=document.head;e.body=document.body;var m=function(a){this.owner=a;this.events=[];this.listeners={}};m.prototype=
{record:function(a,c){this.events.pushUnique(a);exists(this.listeners[a])||(this.listeners[a]=[]);this.listeners[a].push(c)},ignore:function(a,c){var b=this.listeners[a].indexOf(c);this.listeners[a].splice(b,1)}};ClassList=function(a){this.owner=a;a=a.getAttribute("class");this.classes=!a?[]:a.split(/\s+/);this.length=0};ClassList.prototype={classes:[],__update:function(){0===this.classes.length?this.owner.removeAttribute("class"):this.owner.setAttribute("class",this.classes.join(" "));this.length=
this.classes.length},add:function(a){-1===this.classes.indexOf(a)&&this.classes.push(a);this.__update();return this.owner},remove:function(a){a=this.classes.indexOf(a);-1<a&&(this.classes.splice(a,1),this.__update());return this.owner},contains:function(a){return-1!==this.classes.indexOf(a)},item:function(a){return this.classes[a]}};var h=Array.prototype;h.pushUnique=function(a){-1===this.indexOf(a)&&this.push(a)};h.test=function(a,c){!0!==c&&(c=!1);var b,d=this.length;for(b=0;b<d;b++){t=a(this[b]);
if(c&&!t)break;if(t&&!c)return!0}return!1};h["\u5143\u306eforEach"]=h.forEach;h.forEach=function(a){this["\u5143\u306eforEach"](a);return this};h.classes=function(){if(!this["\u5185\u306eclasses"]){this["\u5185\u306eclasses"]={};var a=this;["add","remove"].forEach(function(c){a["\u5185\u306eclasses"][c]=function(){var b=arguments,d;a.forEach(function(a){d=a.classes();d[c].apply(d,b)});return a}});this["\u5185\u306eclasses"].contains=function(){var c=arguments,b;return a.test(function(a){b=a.classes();
return b.contains.apply(b,c)})}}return this["\u5185\u306eclasses"]};["add","replace"].forEach(function(a){h[a]=function(){var c=this[0];return c[a].apply(c,arguments)}});"show toggle set remove clear listen ignore listenOnce".split(" ").forEach(function(a){h[a]=function(){var c=arguments;this.map(function(b){b[a].apply(b,c)});return this}});["find","parent"].forEach(function(a){h[a]=function(){var c=[];this.forEach(function(b){b[a].apply(b,arguments).forEach(function(a){c.pushUnique(a)})});return c}});
["position","html","css","get"].forEach(function(a){h[a]=function(){var c=[];input=arguments;this.forEach(function(b){c.push(b[a].apply(b,input))});return c}});var f=HTMLElement.prototype;f.length=1;f.forEach=function(a){a(this);return this};f.css=function(a,c){if("string"===typeof c)return this.style[a]=c,""===this.get("style")&&this.set("style",""),this;if(!c&&"object"===typeof a){for(var b in a)Object.hasOwnProperty(a,b)||this.css(b,a[b]);return this}return getComputedStyle(this).getPropertyValue(a)||
this.style[a]};f.position=function(){return this.getBoundingClientRect()};f.classes=function(){this["\u5185\u306eclasses"]||(this["\u5185\u306eclasses"]=new ClassList(this));return this["\u5185\u306eclasses"]};f.show=function(a){a?this.removeAttribute("data-tiny-toolkit-hidden"):this.setAttribute("data-tiny-toolkit-hidden","");return this};f.toggle=function(){this.show(e.exists(this.get("data-tiny-toolkit-hidden")));return this};f.html=function(a){return e.exists(a)?(this.innerHTML=a,this):this.innerHTML};
f.parent=function(a){return a?(a.add(this),this):this.parentNode};f.add=function(a){if("string"===typeof a)this.innerHTML+=a;else for(var c,b=function(a){c.add(a)},d=0,g=arguments.length;d<g;d++)e.exists(arguments[d])&&(arguments[d]instanceof Array?(c=this,arguments[d].forEach(b)):this.appendChild(arguments[d]));return this};f.replace=function(a,c){if("string"===typeof a)return this.innerHTML=this.innerHTML.replace(RegExp(a,"g"),c),this;if(e.exists(a.parentNode)&&e.exists(c))return a.parentNode.replaceChild(c,
a),c;this.parentNode.replaceChild(a,this);return a};f.remove=function(a){if("string"===typeof arg)return this.replace(a,"");e.exists(a)?parseInt(a,10)==a?this.removeChild(this.children[a]):a.parentNode&&a.parentNode===this&&this.removeChild(a):this.parentNode.removeChild(this);return this};f.clear=function(){this.innerHTML="";return this};f.get=function(a){return a==parseInt(a,10)?this.children[a]:this.getAttribute(a)};f.set=function(a,c){if(e.exists(c))!1===c?this.removeAttribute(a):this.setAttribute(a,
c);else for(var b in a)Object.hasOwnProperty(a,b)||this.setAttribute(b,a[b]);return this};[e.HTMLDocument?HTMLDocument.prototype:Document.prototype,HTMLElement.prototype].forEach(function(a){a.find=function(a){return l(this,a)};a.eventListeners=!1;a.__addAnEventListener=function(a,b,d){this.addEventListener(a,b,d);this.eventListeners||(this.eventListeners=new m(this));this.eventListeners.record(a,b)};a.__removeAnEventListener=function(a,b,d){this.removeEventListener(a,b,d);this.eventListeners.ignore(a,
b)};a.listen=function(a,b){this.__addAnEventListener(a,b,!1);return this};a.ignore=function(a,b){if(exists(b))this.__removeAnEventListener(a,b,!1);else{var d=this.eventListeners.listeners[a],e;if(exists(d))for(e=d.length-1;0<=e;e--)this.ignore(a,d[e])}return this};a.listenOnce=function(a,b){var d=this,e=function(){d.__removeAnEventListener(a,e,!1);b.call()};this.__addAnEventListener(a,e,!1);return this}});f=e.create("style",{type:"text/css"},"*[data-tiny-toolkit-hidden]{display:none!important;visibility:hidden!important;opacity:0!important}");
j.head.add(f);delete HTMLParagraphElement.prototype.clear})(window,document);
