(function(k){function l(b,c,a){if("disabled"!==b.get("disabled")){a=a.clientX;var d=b.position(),g=d.left,f=d.right-c.position().width,d=parseFloat(b.get("value"));if(g<=a&&a<=f){a-=g;var e=parseFloat(b.get("min")),h=parseFloat(b.get("max")),j=parseFloat(b.get("step"));a=e+j*Math.round(a/(f-g)*(h-e)/j);if(!(a>h||a===d))if(c.css("left",parseInt(1E3*(a-e)/(h-e),10)/10+"%"),c.set("title",a),b.set("value",a),b.onchange)b.onchange({value:a})}}}function m(b){if(exists(b)){var c={disabled:!1,type:"range",
id:b.id||"",min:b.get("min")||"0",max:b.get("max")||"100",step:b.get("step")||"1",value:b.get("value")||"0","class":b.get("class")||"",style:b.get("style")||""},a=create("div",c);b.onchange&&(a.onchange=b.onchange);a.classes().add("tiny-toolkit-input-type-range");var d=create("span",{"class":"tiny-toolkit-input-type-range-slider"});d.set("title",c.value);a.add(d);var g=a.set;a.set=function(b,c){var f=g.call(a,b,c);if(-1!==["min","max","value"].indexOf(b)){var e=a.get("min"),h=a.get("max"),j=a.get("value");
d.css("left",100*(j-e)/(h-e)+"%")}return f};d.onselectstart=function(){return!1};d.onmousedown=function(){return!1};a.onselectstart=function(){return!1};a.onmousedown=function(){return!1};var f=!1,e=-1,h=function(b){if(1===b.which||1===b.button)return a.set("sdown",!0),l(a,d,{clientX:b.clientX}),!1};a.listen("mousedown",function(a){if(!f)return h(a)});a.listen("touchstart",function(a){f=!0;a.which=a.button=1;a.clientX=a.touches.item(0).clientX;return h(a)});document.listen("mousemove",function(b){f||
"true"===a.get("sdown")&&l(a,d,b)});document.listen("touchmove",function(b){var c=(new Date).getTime();f&&-1===e&&"true"===a.get("sdown")?(b.clientX=b.touches.item(0).clientX,l(a,d,b),e=c):50<c-e&&(e=-1)});document.listen("mouseup",function(){f||a.set("sdown",!1)});document.listen("touchend",function(){f&&(a.set("sdown",!1),f=!1,e=-1)});if("0"!==c.value){b=parseFloat(c.min);var j=parseFloat(c.max),c=parseFloat(c.value);d.css("left",100*(c-b)/(j-b)+"%")}a.disable=function(){a.set("disabled","disabled");
a.show(!1);d.show(!1)};a.enable=function(){a.set("disabled",!1);a.show(!0);d.show(!0)};return a}}if(k.Toolkit){var g=HTMLInputElement.prototype,n=g.set;g.set=function(b,c){if(!b||"type"!==b||!c||"range"!==c)return n.apply(this,b,c);var a=m(this);this.parent()&&this.replace(a);return a};k.Toolkit.substitute=m;g=function(b){(b||k).find("input[type=range]").forEach(function(b){exists(b)&&b.parent()&&b.parent().replace(b,m(b))})};g();document.listenOnce("DOMContentLoaded",g)}})(window);
